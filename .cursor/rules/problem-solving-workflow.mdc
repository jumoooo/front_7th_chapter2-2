# Problem Solving and Debugging Workflow

## For AI Agent

### Problem Analysis Workflow

When user reports a test failure or issue with specific file references:

1. **Read and Understand the Problem**
   - Read the test file at the specified line range to understand what is being tested
   - Read the implementation file at the specified line range to see current code
   - Identify the expected behavior from test assertions
   - Identify the actual behavior from current implementation

2. **Diagnose the Issue**
   - Compare expected vs actual output
   - Trace through the code execution flow
   - Identify where the logic diverges from expectations
   - Check for edge cases that might not be handled
   - Verify type handling (null, undefined, arrays, objects, primitives)

3. **Identify Root Cause**
   - Determine if it's a logic error, type handling issue, or edge case
   - Check if normalization/transformation is correct
   - Verify array flattening, filtering, and type conversion
   - Ensure proper handling of nested structures

4. **Fix the Implementation**
   - Modify only the implementation file as specified by user
   - Do NOT modify test files unless explicitly requested
   - Follow existing code patterns and conventions
   - Ensure the fix handles all test cases, not just the failing one
   - Add appropriate error handling and edge case coverage

5. **Verify the Solution**
   - Run tests to verify the fix works
   - Check that no other tests break
   - Ensure code follows project conventions
   - Verify type safety is maintained

### File Reference Handling

When user provides file references like `@filename.ts (start-end)`:

- Read the exact line range specified
- Understand the context by reading surrounding code if needed
- Focus modifications only on the specified file and range
- Respect user's instruction to not modify certain files (e.g., test files)

### Code Modification Rules

- Only modify files explicitly mentioned by the user
- If user says "don't modify test files", strictly follow that instruction
- If user specifies a line range, focus changes within that range
- Maintain existing code style and patterns
- Don't introduce unnecessary changes outside the problem scope

### Debugging Approach

- Start with understanding the test expectation
- Trace through the implementation step by step
- Use console.log or debugger statements temporarily if needed (remove before finalizing)
- Compare actual output structure with expected structure
- Check for:
  - Missing null/undefined checks
  - Incorrect array handling
  - Type conversion issues
  - Missing edge cases
  - Incorrect normalization logic

### Common Issues to Check

1. **Normalization Issues**
   - Are null/undefined/boolean values properly filtered?
   - Are arrays properly flattened?
   - Are primitive values converted to TEXT_ELEMENT correctly?

2. **Structure Issues**
   - Does the output structure match the expected VNode structure?
   - Are keys properly extracted and removed from props?
   - Are children properly normalized and structured?

3. **Type Handling**
   - Are all input types handled correctly?
   - Are type guards used appropriately?
   - Are type assertions safe?

4. **Edge Cases**
   - Empty arrays
   - Nested arrays
   - Mixed types in arrays
   - Null/undefined in various positions

---

## ì‚¬ìš©ììš© ì„¤ëª…

### ğŸ” ë¬¸ì œ ë¶„ì„ ì›Œí¬í”Œë¡œìš°

í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ë‚˜ ë¬¸ì œê°€ ë³´ê³ ë  ë•Œ:

1. **ë¬¸ì œ ì´í•´**
   - ì§€ì •ëœ ë¼ì¸ ë²”ìœ„ì˜ í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ ì½ì–´ ë¬´ì—‡ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ”ì§€ ì´í•´
   - ì§€ì •ëœ ë¼ì¸ ë²”ìœ„ì˜ êµ¬í˜„ íŒŒì¼ì„ ì½ì–´ í˜„ì¬ ì½”ë“œ í™•ì¸
   - í…ŒìŠ¤íŠ¸ ì–´ì„¤ì…˜ì—ì„œ ê¸°ëŒ€ ë™ì‘ íŒŒì•…
   - í˜„ì¬ êµ¬í˜„ì—ì„œ ì‹¤ì œ ë™ì‘ íŒŒì•…

2. **ë¬¸ì œ ì§„ë‹¨**
   - ê¸°ëŒ€ê°’ vs ì‹¤ì œê°’ ë¹„êµ
   - ì½”ë“œ ì‹¤í–‰ íë¦„ ì¶”ì 
   - ê¸°ëŒ€ì™€ ë‹¤ë¥¸ ë¡œì§ ì§€ì  ì‹ë³„
   - ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì—£ì§€ ì¼€ì´ìŠ¤ í™•ì¸

3. **ê·¼ë³¸ ì›ì¸ íŒŒì•…**
   - ë¡œì§ ì˜¤ë¥˜, íƒ€ì… ì²˜ë¦¬ ë¬¸ì œ, ì—£ì§€ ì¼€ì´ìŠ¤ì¸ì§€ íŒë‹¨
   - ì •ê·œí™”/ë³€í™˜ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
   - ë°°ì—´ í‰íƒ„í™”, í•„í„°ë§, íƒ€ì… ë³€í™˜ ê²€ì¦

4. **êµ¬í˜„ ìˆ˜ì •**
   - ì‚¬ìš©ìê°€ ì§€ì •í•œ êµ¬í˜„ íŒŒì¼ë§Œ ìˆ˜ì •
   - í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•˜ì§€ ì•ŠëŠ” í•œ ìˆ˜ì •í•˜ì§€ ì•ŠìŒ
   - ê¸°ì¡´ ì½”ë“œ íŒ¨í„´ê³¼ ì»¨ë²¤ì…˜ ë”°ë¥´ê¸°
   - ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì²˜ë¦¬

5. **í•´ê²°ì±… ê²€ì¦**
   - í…ŒìŠ¤íŠ¸ ì‹¤í–‰í•˜ì—¬ ìˆ˜ì • ì‚¬í•­ í™•ì¸
   - ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ê°€ ê¹¨ì§€ì§€ ì•ŠëŠ”ì§€ í™•ì¸
   - í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ ì¤€ìˆ˜ í™•ì¸

### ğŸ“ íŒŒì¼ ì°¸ì¡° ì²˜ë¦¬

`@filename.ts (ì‹œì‘-ë)` í˜•ì‹ì˜ íŒŒì¼ ì°¸ì¡°ê°€ ì œê³µë  ë•Œ:

- ì§€ì •ëœ ì •í™•í•œ ë¼ì¸ ë²”ìœ„ ì½ê¸°
- í•„ìš”ì‹œ ì£¼ë³€ ì½”ë“œë¥¼ ì½ì–´ ë§¥ë½ ì´í•´
- ì§€ì •ëœ íŒŒì¼ê³¼ ë²”ìœ„ì—ë§Œ ìˆ˜ì • ì§‘ì¤‘
- íŠ¹ì • íŒŒì¼ ìˆ˜ì • ê¸ˆì§€ ì§€ì‹œ ì¤€ìˆ˜ (ì˜ˆ: í…ŒìŠ¤íŠ¸ íŒŒì¼)

### ğŸ”§ ì½”ë“œ ìˆ˜ì • ê·œì¹™

- ì‚¬ìš©ìê°€ ëª…ì‹œì ìœ¼ë¡œ ì–¸ê¸‰í•œ íŒŒì¼ë§Œ ìˆ˜ì •
- "í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ ìˆ˜ì •í•˜ì§€ ë§ˆë¼"ëŠ” ì§€ì‹œë¥¼ ì—„ê²©íˆ ì¤€ìˆ˜
- ë¼ì¸ ë²”ìœ„ê°€ ì§€ì •ë˜ë©´ í•´ë‹¹ ë²”ìœ„ ë‚´ì—ë§Œ ë³€ê²½ ì§‘ì¤‘
- ê¸°ì¡´ ì½”ë“œ ìŠ¤íƒ€ì¼ê³¼ íŒ¨í„´ ìœ ì§€
- ë¬¸ì œ ë²”ìœ„ ë°–ì˜ ë¶ˆí•„ìš”í•œ ë³€ê²½ ë„ì… ê¸ˆì§€

### ğŸ› ë””ë²„ê¹… ì ‘ê·¼ë²•

- í…ŒìŠ¤íŠ¸ ê¸°ëŒ€ê°’ ì´í•´ë¶€í„° ì‹œì‘
- êµ¬í˜„ì„ ë‹¨ê³„ë³„ë¡œ ì¶”ì 
- í•„ìš”ì‹œ ì„ì‹œë¡œ console.log ì‚¬ìš© (ìµœì¢…í™” ì „ ì œê±°)
- ì‹¤ì œ ì¶œë ¥ êµ¬ì¡°ì™€ ê¸°ëŒ€ êµ¬ì¡° ë¹„êµ
- ë‹¤ìŒ ì‚¬í•­ í™•ì¸:
  - ëˆ„ë½ëœ null/undefined ì²´í¬
  - ì˜ëª»ëœ ë°°ì—´ ì²˜ë¦¬
  - íƒ€ì… ë³€í™˜ ë¬¸ì œ
  - ëˆ„ë½ëœ ì—£ì§€ ì¼€ì´ìŠ¤
  - ì˜ëª»ëœ ì •ê·œí™” ë¡œì§
