# Error Handling Rules

## For AI Agent

### Error Handling Principles

- Handle errors proactively at function boundaries
- Validate inputs early and fail fast
- Provide meaningful error messages
- Return null or empty values gracefully when appropriate
- Use try-catch blocks for operations that can fail
- Don't swallow errors silently

### Input Validation

- Validate function parameters at the start of functions
- Check for null, undefined, and invalid values
- Use type guards for runtime type checking
- Validate array bounds before accessing elements
- Check object property existence before access

### Graceful Degradation

- Return null instead of throwing when value doesn't exist
- Return empty arrays/objects instead of null when appropriate
- Use optional chaining and nullish coalescing
- Provide default values for missing data

### Error Messages

- Write error messages in Korean for user-facing errors
- Include context: what operation failed, what value caused it
- Be specific: "Cannot normalize null node" not "Error"
- Help with debugging: include relevant variable values

### Error Handling Patterns

```typescript
// Good: Early validation
function processNode(node: VNode | null): VNode | null {
  if (isEmptyValue(node)) {
    return null; // Graceful return
  }
  // Process node...
}

// Good: Try-catch for operations that can fail
try {
  const result = riskyOperation();
  return result;
} catch (error) {
  console.error("Operation failed:", error);
  return defaultValue;
}

// Good: Type guard
function isValidNode(value: unknown): value is VNode {
  return value !== null && typeof value === "object" && "type" in value;
}
```

### Edge Cases to Handle

- null and undefined values
- Empty arrays and objects
- Invalid types or shapes
- Boundary conditions (empty strings, zero, negative numbers)
- Circular references (for deep operations)
- Missing required properties

### Project-Specific Error Handling

- Use `isEmptyValue` utility for null/undefined/boolean checks
- Handle VNode normalization edge cases
- Validate Instance and Context structures
- Handle hook state edge cases (empty arrays, missing paths)
- Gracefully handle DOM operations (missing elements, invalid operations)

### Error Recovery

- When possible, recover from errors and continue
- Log errors for debugging
- Don't break the entire application for non-critical errors
- Provide fallback behavior when appropriate

---

## ì‚¬ìš©ììš© ì„¤ëª…

### ğŸ›¡ï¸ ì—ëŸ¬ ì²˜ë¦¬ ì›ì¹™

- í•¨ìˆ˜ ê²½ê³„ì—ì„œ ì—ëŸ¬ë¥¼ ì‚¬ì „ì— ì²˜ë¦¬í•©ë‹ˆë‹¤
- ì…ë ¥ê°’ì„ ì¡°ê¸°ì— ê²€ì¦í•˜ê³  ë¹ ë¥´ê²Œ ì‹¤íŒ¨í•©ë‹ˆë‹¤
- ì˜ë¯¸ ìˆëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤
- ì ì ˆí•œ ê²½ìš° nullì´ë‚˜ ë¹ˆ ê°’ì„ ìš°ì•„í•˜ê²Œ ë°˜í™˜í•©ë‹ˆë‹¤

### âœ… ì…ë ¥ê°’ ê²€ì¦

- í•¨ìˆ˜ ì‹œì‘ ë¶€ë¶„ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤
- null, undefined, ì˜ëª»ëœ ê°’ì„ í™•ì¸í•©ë‹ˆë‹¤
- ëŸ°íƒ€ì„ íƒ€ì… ì²´í¬ë¥¼ ìœ„í•´ íƒ€ì… ê°€ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤
- ë°°ì—´ ìš”ì†Œì— ì ‘ê·¼í•˜ê¸° ì „ì— ê²½ê³„ë¥¼ í™•ì¸í•©ë‹ˆë‹¤

### ğŸ¯ ìš°ì•„í•œ ì²˜ë¦¬

- ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•ŒëŠ” throw ëŒ€ì‹  nullì„ ë°˜í™˜í•©ë‹ˆë‹¤
- ì ì ˆí•œ ê²½ìš° null ëŒ€ì‹  ë¹ˆ ë°°ì—´/ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤
- ì˜µì…”ë„ ì²´ì´ë‹ê³¼ nullish ë³‘í•©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤
- ëˆ„ë½ëœ ë°ì´í„°ì— ëŒ€í•œ ê¸°ë³¸ê°’ì„ ì œê³µí•©ë‹ˆë‹¤

### ğŸ’¬ ì—ëŸ¬ ë©”ì‹œì§€

- ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” ì—ëŸ¬ëŠ” í•œê¸€ë¡œ ì‘ì„±í•©ë‹ˆë‹¤
- ë§¥ë½ì„ í¬í•¨í•©ë‹ˆë‹¤: ì–´ë–¤ ì‘ì—…ì´ ì‹¤íŒ¨í–ˆëŠ”ì§€, ì–´ë–¤ ê°’ì´ ì›ì¸ì¸ì§€
- êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤: "null ë…¸ë“œë¥¼ ì •ê·œí™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤" (ë‹¨ìˆœíˆ "ì—ëŸ¬"ê°€ ì•„ë‹˜)
- ë””ë²„ê¹…ì— ë„ì›€ì´ ë˜ë„ë¡ ê´€ë ¨ ë³€ìˆ˜ ê°’ì„ í¬í•¨í•©ë‹ˆë‹¤

### ğŸ” ì²˜ë¦¬í•´ì•¼ í•  ì—£ì§€ ì¼€ì´ìŠ¤

- null ë° undefined ê°’
- ë¹ˆ ë°°ì—´ ë° ê°ì²´
- ì˜ëª»ëœ íƒ€ì…ì´ë‚˜ í˜•íƒœ
- ê²½ê³„ ì¡°ê±´ (ë¹ˆ ë¬¸ìì—´, 0, ìŒìˆ˜)
- ìˆœí™˜ ì°¸ì¡° (ê¹Šì€ ì‘ì—…ì˜ ê²½ìš°)
- ëˆ„ë½ëœ í•„ìˆ˜ ì†ì„±

### ğŸ”§ í”„ë¡œì íŠ¸ íŠ¹ì • ì—ëŸ¬ ì²˜ë¦¬

- null/undefined/boolean ì²´í¬ì—ëŠ” `isEmptyValue` ìœ í‹¸ë¦¬í‹° ì‚¬ìš©
- VNode ì •ê·œí™” ì—£ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬
- Instance ë° Context êµ¬ì¡° ê²€ì¦
- í›… ìƒíƒœ ì—£ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬ (ë¹ˆ ë°°ì—´, ëˆ„ë½ëœ ê²½ë¡œ)
- DOM ì‘ì—…ì„ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬ (ëˆ„ë½ëœ ìš”ì†Œ, ì˜ëª»ëœ ì‘ì—…)
